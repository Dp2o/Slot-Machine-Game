<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Emoji Slot Machine</title>
  <style>
    body {
      background: #111;
      color: #fff;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      flex-direction: row;
      padding: 2rem;
      gap: 2rem;
    }

    .main-area {
      flex: 2;
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .slot-machine {
      display: grid;
      grid-template-columns: repeat(6, 80px);
      grid-template-rows: repeat(4, 80px);
      gap: 10px;
      justify-content: center;
      margin: 2rem 0;
    }

    .reel {
      background: #222;
      border: 2px solid #444;
      border-radius: 12px;
      width: 80px;
      height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      transition: all 0.3s ease;
    }

    button {
      background: #28a745;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 1rem;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.2s ease;
      margin: 5px;
    }

    button:hover {
      background: #218838;
    }

    .message {
      margin-top: 1rem;
      font-size: 1.2rem;
    }

    .balance {
      font-size: 1rem;
      margin-top: 0.3rem;
    }

    .sidebar {
      flex: 1;
      background: #222;
      border-radius: 12px;
      padding: 1rem;
      height: fit-content;
    }

    .sidebar h2 {
      margin-top: 0;
    }

    .slot-tier {
      margin: 0.5rem 0;
      padding: 0.5rem;
      background: #333;
      border-radius: 8px;
      font-size: 0.9rem;
    }

    .slot-tier span {
      display: block;
      margin: 2px 0;
    }

    .dropdown {
      background: #222;
      border: 1px solid #444;
      border-radius: 8px;
      margin: 0.5rem 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }

    .dropdown-content {
      padding: 1rem;
      display: none;
    }

    .dropdown.active .dropdown-content {
      display: block;
    }

    .dropdown-btn {
      background: #333;
      color: white;
      padding: 10px 15px;
      border: none;
      font-size: 1rem;
      width: 100%;
      text-align: left;
      cursor: pointer;
      border-radius: 8px;
      margin-bottom: 0.5rem;
    }
  </style>
</head>
<body>

  <div class="main-area">
    <h1>üé∞ Emoji Slot Machine</h1>
    <div class="balance" id="balance">Balance: 100</div>
    <div class="slot-machine" id="machine"></div>

    <div class="controls">
      <button onclick="spin()">Spin (10 coins)</button>
    </div>

    <div class="message" id="message">Press Spin to play.</div>

    <div class="dropdown">
      <button class="dropdown-btn" onclick="toggleDropdown(this)">‚öôÔ∏è Settings</button>
      <div class="dropdown-content">
        <button onclick="resetGame()">Restart Game</button>
        <p>More settings coming soon!</p>
      </div>
    </div>

    <div class="dropdown">
      <button class="dropdown-btn" onclick="toggleDropdown(this)">üõç Shop</button>
      <div class="dropdown-content">
        <button onclick="buyItem('doubleProfit')">Buy Double Profit Boost (15%) - 50 coins</button>
      </div>
    </div>
  </div>

  <div class="sidebar">
    <h2>üìã Slot Machines</h2>
    <div id="tierList"></div>
  </div>

  <script>
    const rows = 4;
    const cols = 6;
    let balance = 100;
    let grid = [];
    let boosts = {
      doubleProfit: false,
    };

    // Define tiers with emojis and weights
    const tiers = [
      {
        name: "Basic Slots",
        cost: 10,
        chance: 0.4,
        reward: 20,
        emojis: [
          { symbol: "üçí", weight: 5 },
          { symbol: "üçã", weight: 4 },
          { symbol: "üçâ", weight: 3 },
          { symbol: "üíé", weight: 2 },
          { symbol: "‚≠ê", weight: 1 },
          { symbol: "üîî", weight: 1 }
        ]
      },
      {
        name: "Mid Slots",
        cost: 20,
        chance: 0.25,
        reward: 40,
        emojis: [
          { symbol: "üçí", weight: 4 },
          { symbol: "üçã", weight: 3 },
          { symbol: "üçâ", weight: 3 },
          { symbol: "üíé", weight: 2 },
          { symbol: "‚≠ê", weight: 2 },
          { symbol: "üîî", weight: 1 }
        ]
      },
      {
        name: "High Stakes",
        cost: 50,
        chance: 0.1,
        reward: 100,
        emojis: [
          { symbol: "üçí", weight: 2 },
          { symbol: "üçã", weight: 2 },
          { symbol: "üçâ", weight: 2 },
          { symbol: "üíé", weight: 2 },
          { symbol: "‚≠ê", weight: 2 },
          { symbol: "üîî", weight: 1 }
        ]
      }
    ];

    const machineEl = document.getElementById("machine");
    const messageEl = document.getElementById("message");
    const balanceEl = document.getElementById("balance");
    const tierListEl = document.getElementById("tierList");

    function buildGrid() {
      machineEl.innerHTML = "";
      grid = [];
      for (let r = 0; r < rows; r++) {
        const row = [];
        for (let c = 0; c < cols; c++) {
          const div = document.createElement("div");
          div.classList.add("reel");
          div.textContent = "‚ùî";
          machineEl.appendChild(div);
          row.push(div);
        }
        grid.push(row);
      }
    }

    function drawTierList() {
      tierListEl.innerHTML = "";
      for (const tier of tiers) {
        const el = document.createElement("div");
        el.className = "slot-tier";
        const emojis = tier.emojis.map(e => `${e.symbol} (x${e.weight})`).join(", ");
        el.innerHTML = `
          <strong>${tier.name}</strong>
          <span>Cost: ${tier.cost} coins</span>
          <span>Win Chance: ${(tier.chance * 100).toFixed(0)}%</span>
          <span>Reward: ${tier.reward} coins</span>
          <span>Emojis: ${emojis}</span>
        `;
        tierListEl.appendChild(el);
      }
    }

    function getRandomEmojiFromTier(tier) {
      const list = [];
      tier.emojis.forEach(e => {
        for (let i = 0; i < e.weight; i++) list.push(e.symbol);
      });
      return list[Math.floor(Math.random() * list.length)];
    }

    function spin() {
      const tier = tiers[0]; // Basic Slots for now
      if (balance < tier.cost) {
        messageEl.textContent = "üí∏ Not enough coins!";
        return;
      }

      balance -= tier.cost;
      const values = [];

      for (let r = 0; r < rows; r++) {
        values[r] = [];
        for (let c = 0; c < cols; c++) {
          const emoji = getRandomEmojiFromTier(tier);
          values[r][c] = emoji;
          grid[r][c].textContent = emoji;
        }
      }

      let win = Math.random() < tier.chance;
      if (win) {
        let payout = tier.reward;
        if (boosts.doubleProfit && Math.random() < 0.15) {
          payout *= 2;
          messageEl.textContent = "üí• Boost activated! Double payout!";
        } else {
          messageEl.textContent = `üéâ You win ${payout} coins!`;
        }
        balance += payout;
      } else {
        messageEl.textContent = "üò¢ No match. Try again!";
      }

      balanceEl.textContent = `Balance: ${balance}`;
    }

    function resetGame() {
      balance = 100;
      boosts.doubleProfit = false;
      messageEl.textContent = "Game reset.";
      balanceEl.textContent = `Balance: ${balance}`;
      buildGrid();
    }

    function buyItem(item) {
      if (item === "doubleProfit") {
        if (balance < 50) {
          messageEl.textContent = "‚ùå Not enough coins for Double Profit Boost!";
          return;
        }
        if (boosts.doubleProfit) {
          messageEl.textContent = "üü° You already own this boost.";
          return;
        }
        balance -= 50;
        boosts.doubleProfit = true;
        messageEl.textContent = "‚úÖ Double Profit Boost activated!";
        balanceEl.textContent = `Balance: ${balance}`;
      }
    }

    function toggleDropdown(button) {
      const parent = button.parentElement;
      parent.classList.toggle("active");
    }

    // Init
    buildGrid();
    drawTierList();
  </script>

</body>
</html>
